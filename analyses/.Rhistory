stop()
}
for(file_var in names(all_files) ){
read.csv(all_files[[file_var]], stringsAsFactors=FALSE) %>%
assign(file_var, ., envir=.GlobalEnv)
}
if(FILES_PRESENT) passed("All files present!")
for(file_var in names(all_files) ){
read.csv(all_files[[file_var]], stringsAsFactors=FALSE) %>%
assign(file_var, ., envir=.GlobalEnv)
}
names(all_files)
head(tk)
# set the path to the repository (requires customization to your machine)
REPOSITORY_FOLDER <- "~/ctc-repository"
# Load Libraries
library(dplyr)
options(stringsAsFactors=FALSE)
# Define Constants
DATE_FORMAT   <- "[0-9]{4}-[0-9]{2}-[0-9]{2}" # YYYY-MM-DD
ALLOWED_GENDERS <- c("M","F")
# Load Helper Functions
setwd(REPOSITORY_FOLDER)
source("common/helper_functions.R")
source("scripts/key_variables.R")
DATA_FOLDER <- file.path(DATA_ROOT, DATASET_NAME)
tryCatch( setwd(DATA_FOLDER),
error=function(err){
stop("The data folder you specified is incorrect")
})
passed(paste("Data Folder set to:",DATA_FOLDER))
FILES_PRESENT <- TRUE
# Define Data Files
key_files <- list(
"ck"="column_key.csv",
"tk"="term_key_dates.csv",
"lgk"="letter_grade_key.csv",
"fs"="fulltime_standing.csv"
)
record_files <- list(
"md"="major_declarations.csv",
"ts"="term_summary.csv",
"cr"="course_records.csv",
"br"="baseline_records.csv"
)
all_files <- c(key_files,record_files)
unfound_files <- all_files[ !all_files %in% list.files() ]
if(length(unfound_files) > 0){
FILES_PRESENT <- FALSE
paste("\nThe following file was not found:",unfound_files) %>%
stop()
}
for(file_var in names(all_files) ){
read.csv(all_files[[file_var]], stringsAsFactors=FALSE) %>%
assign(file_var, ., envir=.GlobalEnv)
}
if(FILES_PRESENT) passed("All files present!")
head(tk)
head(cr)
head(cr$term)
library(car)
cr$term<-recode(cr$term,"'2011 Fall Quarter'='2011-2012 Fall';
'2012 Spring Quarter'='2011-2012 Spring';
'2012 Winter Quarter'='2011-2012 Winter';
'2012 Summer Quarter'='2011-2012 Summer';
'2012 Fall Quarter'='2012-2013 Fall';
'2013 Spring Quarter'='2012-2013 Spring';
'2013 Winter Quarter'='2012-2013 Winter';
'2013 Summer Quarter'='2012-2013 Summer';
'2013 Fall Quarter'='2013-2014 Fall';
'2014 Spring Quarter'='2013-2014 Spring';
'2014 Winter Quarter'='2013-2014 Winter';
'2014 Summer Quarter'='2013-2014 Summer'")
br$gender[br$gender == "Unknown"] <- NA
head(cr)
library(tidyr)
library(dplyr)
sem <- function(x) {sd(x) / sqrt(length(x))}
ci95 <- function(x) {sem(x) * 1.96}
library(tidyr)
library(dplyr)
sem <- function(x) {sd(x) / sqrt(length(x))}
ci95 <- function(x) {sem(x) * 1.96}
library(ggplot2)
getwd()
setwd("~/ESmith_psych254/analyses")
subinfo <- read.csv("../data/sklar_expt6_subinfo_corrected.csv")
d.a <- read.csv("../data/sklar_expt6a_corrected.csv")
d.b <- read.csv("../data/sklar_expt6b_corrected.csv")
head(d.a)
subinfo
head(d.b)
temp <- d.a %>%
gather(id,time,
X1:X21)
temp
head(temp)
d.b <- d.b %>%
gather(id,time,
X22:X42)
head(d.b)
d <- bind_rows(d.a,d.b)
??bind_rows
?combine_rows
library(dplyr)
d <- bind_rows(d.a,d.b)
browseVignettes("dplyr")
install.packages("dplyr")
install.packages("dplyr")
library(dplyr)
d <- bind_rows(d.a,d.b)
head(d)
setwd("~/ESmith_psych254/analyses")
subinfo <- read.csv("../data/sklar_expt6_subinfo_corrected.csv")
d.a <- read.csv("../data/sklar_expt6a_corrected.csv")
d.b <- read.csv("../data/sklar_expt6b_corrected.csv")
d.a <- d.a %>%
gather(id,time,
X1:X21)
d.b <- d.b %>%
gather(id,time,
X22:X42)
library(tidyr)
library(dplyr)
sem <- function(x) {sd(x) / sqrt(length(x))}
ci95 <- function(x) {sem(x) * 1.96}
setwd("~/ESmith_psych254/analyses")
subinfo <- read.csv("../data/sklar_expt6_subinfo_corrected.csv")
d.a <- read.csv("../data/sklar_expt6a_corrected.csv")
d.b <- read.csv("../data/sklar_expt6b_corrected.csv")
d.a <- d.a %>%
gather(id,time,
X1:X21)
d.b <- d.b %>%
gather(id,time,
X22:X42)
d <- bind_rows(d.a,d.b)
head(d)
head(sub_info)
head(subinfo)
gsub("X","",d$id)
d$id <- gsub("X","",d$id) # get rid of X's to merge
head(subinfo)
head(d$id)
d <- merge(subinfo,d,by.x="subid","id")
head(d)
d$presentation.time <- factor(d$presentation.time)
levels(d$operand) <- c("addition","subtraction")
table(d$operand)
str(d$operand)
d$operand <- factor(d$operand)
d$operand <- factor(d$operand)
levels(d$operand) <- c("addition","subtraction")
table(d$operand)
hist(d$time)
hist(d$time[d$time >600 & d$time <700])
hist(d$time[d$time >600 & d$time <800])
stem(d$time[d$time >600 & d$time <800])
663-627
699-663
hist(d$time)
hist(d$time[d$time < 1000])
1/.036
head(d.a)
head(d)
ggplot(aes(d,x=objective.test,y=subjective.test)) +
theme_classic()
ggplot(aes(d,x=objective.test,y=subjective.test)) +
geom_point() +
theme_classic()
library(ggplot2)
ggplot(aes(d,x=objective.test,y=subjective.test)) +
geom_point() +
theme_classic()
?geom_point
ggplot(d,aes(x=objective.test,y=subjective.test)) +
geom_point()
# First let's check out the relationship between the subjective and objective primes
ggplot(d,aes(x=subjective.test,y=objective.test)) +
geom_point() +
theme_classic()
ggplot(subinfo,aes(x=subjective.test,y=objective.test)) +
geom_point() +
theme_classic()
?t.test
hist(d$time[d$time > 400 & d$time < 1000])
stem(d$time[d$time >600 & d$time <800])
lm(objective.test ~ subjective.test, data=subinfo)
summary(lm(objective.test ~ subjective.test, data=subinfo))
summary(lm(objective.test ~ as.factor(subjective.test), data=subinfo))
head(subinfor)
head(subinfo)
exclusion <- subinfo %>%
filter(subjective.test == 0 &
objective.test < .6) %>%
select(subid)
exclusion
ggplot(subinfo,aes(x=subjective.test,y=objective.test)) +
geom_point() +
theme_classic()
temp <- d %>%
filter(id %in% exclusion)
temp <- d %>%
filter(id in exclusion)
head(d)
temp <- d %>%
filter(subid %in% exclusion)
temp <- d %>%
filter(! subid %in% exclusion)
head(d)
exclusion
temp <- d %>%
filter(! subid %in% exclusion$subid)
temp/25
dim(temp)/25
dim(d)/42
ds <- d %>%
filter(! subid %in% exclusion$subid) # get rid of those that are excluded
head(d)
head(ds)
temp <- ds %>%
group_by(subid,congruent) %>%
summarize(mean(time))
temp
temp <- ds %>%
group_by(subid,congruent) %>%
summarize(mean(time,na.rm=T))
temp
p1 <- ds %>%
group_by(subid,congruent) %>%
summarize(mean(time,na.rm=T))
head(p1)
p1 <- ds %>%
group_by(subid,congruent) %>%
summarize(time = mean(time,na.rm=T))
head(p1)
ggplot(p1, aes(x=congruent, y=time)) + geom_point()
ggplot(p1, aes(x=congruent, y=time)) + geom_point(alpha=.2)
ggplot(p1, aes(x=congruent, y=time)) + geom_point(alpha=.2) +
theme_classic() +
geom_bar()
p1 <- ds %>%
group_by(subid,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time)
head(p1)
p1 <- ds %>%
group_by(subid,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no)
head(p1)
head(ds)
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no)
head(ps1)
head(p1)
ggplot(p1, aes(x=presentation.time, y=diff)) + geom_point(alpha=.2) +
theme_classic() +
geom_bar()
ggplot(p1, aes(x=presentation.time, y=diff)) + geom_point(alpha=.2) +
theme_classic()
ggplot(p1, aes(x=presentation.time, y=diff)) + geom_point(alpha=.2) +
theme_classic() +
geom_bar() +
facet_grid(.~operand)
ggplot(p1, aes(x=presentation.time, y=diff)) + geom_point(alpha=.2) +
theme_classic() +
geom_bar(stat="identity") +
facet_grid(.~operand)
ggplot(p1, aes(x=presentation.time, y=diff)) +
theme_classic() +
geom_bar(stat="identity") +
facet_grid(.~operand)
head(p1)
ggplot(p1, aes(x=presentation.time, y=diff)) +
theme_classic() +
geom_bar(stat="identity") +
facet_grid(presentation.time~operand)
ggplot(p1, aes(x=presentation.time, y=diff)) +
theme_classic() +
geom_bar(stat="mean") +
facet_grid(presentation.time~operand)
ggplot(p1, aes(x=presentation.time, y=diff)) +
theme_classic() +
geom_bar(stat=mean) +
facet_grid(presentation.time~operand)
?geom_bar
ggplot(p1, aes(x=presentation.time, y=diff)) +
theme_classic() +
geom_bar(stat="identity") +
facet_grid(presentation.time~operand)
ggplot(p1, aes(x=presentation.time, y=diff)) +
theme_classic() +
geom_bar(stat="identity") +
facet_grid(operand)
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no) %>%
group_by(presentation.time,operand) %>%
summary(mean = mean(diff))
head(p1)
p1
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no) %>%
group_by(presentation.time,operand) %>%
summarize(mean = mean(diff))
head(p1)
p1
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T))
head(p1)
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no)
dim(p1)
head(p1)
head(ds)
table(ds$subid, ds$presentation.time)
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no)
head(p1)
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no) %>%
group_by(presentation.time,operand) %>%
summarize(mean = mean(diff))
head(p1)
head(sd)
head(ds)
p1 <- ds %>%
group_by(subid,presentation.time,operand,congruent) %>%
summarize(time = mean(time,na.rm=T))
head(p1)
p1 <- ds %>%
filter(operand == "subtraction")
dim(p1)
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no) %>%
group_by(presentation.time,operand) %>%
summarize(mean = mean(diff))
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff))
p1
head(ds)
head(p1)
ggplot(p1, aes(x=presentation.time, y=mean)) +
theme_classic() +
geom_bar(stat="identity")
head(ds)
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff))
p1
ggplot(subinfo,aes(x=subjective.test,y=objective.test)) +
geom_point() +
theme_classic()
exclusion <- subinfo %>%
filter(subjective.test != 0 &
objective.test > .6) %>%
select(subid)
dim(ds)
ds <- d %>%
filter(subjective.test == 0 &
objective.test < .6) %>%
select(subid)
dim(ds)
head(d)
ds <- d %>%
filter(subjective.test == 0 &
objective.test < .6)
head(ds)
table(ds$subid)
length(table(ds$subid))
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = yes - no) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff))
p1
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff))
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff),
sem = sem(mean),
ci = ci95(mean))
p1
sem
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff),
sem = sem(diff),
ci = ci95(diff))
p1
ggplot(p1, aes(x=presentation.time, y=mean)) +
theme_classic() +
geom_bar(stat="identity") +
facet_grid(operand)
geom_point(alpha=.2)
geom_errorbar(aes(ymax = mean + sem, ymin=mean - sem), width=1)
ggplot(p1, aes(x=presentation.time, y=mean)) +
theme_classic() +
geom_bar(stat="identity") +
geom_errorbar(aes(ymax = mean + sem, ymin=mean - sem), width=1)
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes,
sem=sem(diff),
ci = ci95(diff))
head(p1)
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes,
sem=sem(diff),
ci = ci95(diff)) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff),
sem = mean(sem),
ci = mean(ci))
p1
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff),
sem = sem(diff),
ci = ci95(diff))
ggplot(p1, aes(x=presentation.time, y=mean)) +
theme_classic() +
geom_bar(stat="identity") +
geom_errorbar(aes(ymax = mean + sem, ymin=mean - sem), width=1)
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes)
p1
p1 <- ds %>%
filter(operand == "subtraction") %>%
group_by(subid,presentation.time,congruent) %>%
summarize(time = mean(time,na.rm=T)) %>%
spread(congruent,time) %>%
mutate(diff = no - yes) %>%
group_by(presentation.time) %>%
summarize(mean = mean(diff),
sem = sem(diff)/2,
ci = ci95(diff))
ggplot(p1, aes(x=presentation.time, y=mean)) +
theme_classic() +
geom_bar(stat="identity") +
geom_errorbar(aes(ymax = mean + sem, ymin=mean - sem), width=1)
